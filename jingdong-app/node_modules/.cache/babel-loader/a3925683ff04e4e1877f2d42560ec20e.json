{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\src\\views\\address\\UpdateAddress.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\src\\views\\address\\UpdateAddress.vue","mtime":1620539087640},{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvRGVza3RvcC9qaW5nRG9uZy9qaW5nZG9uZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IHVzZVJvdXRlciwgdXNlUm91dGUgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgcG9zdCwgcGF0Y2gsIGdldCB9IGZyb20gJy4uLy4uL3V0aWxzL3JlcXVlc3QnOwppbXBvcnQgeyByZWFjdGl2ZSwgdG9SZWZzIH0gZnJvbSAndnVlJzsgLy8gIOWcsOWdgOeahOaWsOW7uuaIluabtOaWsAoKdmFyIHVzZVRvcEVmZmVjdCA9IGZ1bmN0aW9uIHVzZVRvcEVmZmVjdCgpIHsKICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgdmFyIHJvdXRlID0gdXNlUm91dGUoKTsKICB2YXIgZGF0YSA9IHJlYWN0aXZlKHsKICAgIGFkZHJlc3M6IHt9CiAgfSk7CiAgdmFyIGFkZHJlc3NJZCA9IHJvdXRlLnBhcmFtcy5pZDsKICB2YXIgYWRkcmVzc09iaiA9IHt9OwogIHZhciBtZXNzYWdlID0gYWRkcmVzc0lkID8gJ+e8lui+keWcsOWdgCcgOiAn5paw5bu65Zyw5Z2AJzsKCiAgdmFyIGhhbmRsZUJhY2tDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUJhY2tDbGljaygpIHsKICAgIHJvdXRlci5iYWNrKCk7CiAgfTsKCiAgdmFyIGhhbmRsZVNhdmVDbGljayA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIF9hZGRyZXNzJHZhbHVlLCBjaXR5LCBkZXBhcnRtZW50LCBob3VzZW51bWJlciwgbmFtZSwgcGhvbmUsIHJlcywgX3JlczsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfYWRkcmVzcyR2YWx1ZSA9IGFkZHJlc3MudmFsdWUsIGNpdHkgPSBfYWRkcmVzcyR2YWx1ZS5jaXR5LCBkZXBhcnRtZW50ID0gX2FkZHJlc3MkdmFsdWUuZGVwYXJ0bWVudCwgaG91c2VudW1iZXIgPSBfYWRkcmVzcyR2YWx1ZS5ob3VzZW51bWJlciwgbmFtZSA9IF9hZGRyZXNzJHZhbHVlLm5hbWUsIHBob25lID0gX2FkZHJlc3MkdmFsdWUucGhvbmU7CiAgICAgICAgICAgICAgYWRkcmVzc09iai5jaXR5ID0gY2l0eTsKICAgICAgICAgICAgICBhZGRyZXNzT2JqLmRlcGFydG1lbnQgPSBkZXBhcnRtZW50OwogICAgICAgICAgICAgIGFkZHJlc3NPYmouaG91c2VudW1iZXIgPSBob3VzZW51bWJlcjsKICAgICAgICAgICAgICBhZGRyZXNzT2JqLm5hbWUgPSBuYW1lOwogICAgICAgICAgICAgIGFkZHJlc3NPYmoucGhvbmUgPSBwaG9uZTsKCiAgICAgICAgICAgICAgaWYgKCFhZGRyZXNzSWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIHBhdGNoKCJhcGkvdXNlci9hZGRyZXNzLyIuY29uY2F0KGFkZHJlc3NJZCksIGFkZHJlc3NPYmopOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmIChyZXMuZXJybm8gPT09IDApIHsKICAgICAgICAgICAgICAgIHJvdXRlci5iYWNrKCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICByZXR1cm4gcG9zdCgnYXBpL3VzZXIvYWRkcmVzcycsIGFkZHJlc3NPYmopOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBfcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKF9yZXMuZXJybm8gPT09IDApIHsKICAgICAgICAgICAgICAgIHJvdXRlci5iYWNrKCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZVNhdmVDbGljaygpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgZ2V0QWRkcmVzcyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgcmVzdWx0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZ2V0KCJhcGkvdXNlci9hZGRyZXNzLyIuY29uY2F0KGFkZHJlc3NJZCkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICBpZiAoKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdC5lcnJubykgPT09IDAgJiYgcmVzdWx0ICE9PSBudWxsICYmIHJlc3VsdCAhPT0gdm9pZCAwICYmIHJlc3VsdC5kYXRhKSB7CiAgICAgICAgICAgICAgICBkYXRhLmFkZHJlc3MgPSByZXN1bHQuZGF0YTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGdldEFkZHJlc3MoKSB7CiAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBfdG9SZWZzID0gdG9SZWZzKGRhdGEpLAogICAgICBhZGRyZXNzID0gX3RvUmVmcy5hZGRyZXNzOwoKICByZXR1cm4gewogICAgaGFuZGxlQmFja0NsaWNrOiBoYW5kbGVCYWNrQ2xpY2ssCiAgICBoYW5kbGVTYXZlQ2xpY2s6IGhhbmRsZVNhdmVDbGljaywKICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICBnZXRBZGRyZXNzOiBnZXRBZGRyZXNzLAogICAgYWRkcmVzczogYWRkcmVzcywKICAgIGFkZHJlc3NJZDogYWRkcmVzc0lkCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVXBkYXRlQWRkcmVzcycsCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIF91c2VUb3BFZmZlY3QgPSB1c2VUb3BFZmZlY3QoKSwKICAgICAgICBoYW5kbGVCYWNrQ2xpY2sgPSBfdXNlVG9wRWZmZWN0LmhhbmRsZUJhY2tDbGljaywKICAgICAgICBtZXNzYWdlID0gX3VzZVRvcEVmZmVjdC5tZXNzYWdlLAogICAgICAgIGhhbmRsZVNhdmVDbGljayA9IF91c2VUb3BFZmZlY3QuaGFuZGxlU2F2ZUNsaWNrLAogICAgICAgIGdldEFkZHJlc3MgPSBfdXNlVG9wRWZmZWN0LmdldEFkZHJlc3MsCiAgICAgICAgYWRkcmVzcyA9IF91c2VUb3BFZmZlY3QuYWRkcmVzcywKICAgICAgICBhZGRyZXNzSWQgPSBfdXNlVG9wRWZmZWN0LmFkZHJlc3NJZDsKCiAgICBpZiAoYWRkcmVzc0lkKSBnZXRBZGRyZXNzKCk7CiAgICByZXR1cm4gewogICAgICBoYW5kbGVCYWNrQ2xpY2s6IGhhbmRsZUJhY2tDbGljaywKICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgaGFuZGxlU2F2ZUNsaWNrOiBoYW5kbGVTYXZlQ2xpY2ssCiAgICAgIGFkZHJlc3M6IGFkZHJlc3MKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\src\\views\\address\\UpdateAddress.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n     <div class=\"header\">\r\n        <span class=\"header__back iconfont\" @click=\"handleBackClick\">&#xe697;</span>\r\n        <span class=\"header__text\">{{message}}</span>\r\n        <span class=\"header__new\" @click=\"() => { handleSaveClick() }\">保存</span>\r\n     </div>\r\n     <div class=\"content\">\r\n        <div class=\"content__item\">\r\n        所在城市:<input type=\"text\" v-model=\"address.city\" placeholder=\"如北京市朝阳区\">\r\n        </div>\r\n        <div class=\"content__item\">\r\n        小区/大厦/学校：<input type=\"text\" v-model=\"address.department\"  placeholder=\"如光华小区\">\r\n        </div>\r\n        <div class=\"content__item\">\r\n        楼号-门牌号:<input type=\"text\" v-model=\"address.housenumber\" placeholder=\"3号楼10层303\">\r\n        </div>\r\n        <div class=\"content__item\">\r\n        收货人：:<input type=\"text\" v-model=\"address.name\"  placeholder=\"如请填写收货人姓名\">\r\n        </div>\r\n        <div class=\"content__item\">\r\n        联系电话：:<input type=\"text\"  v-model=\"address.phone\" placeholder=\"请填写收货人联系电话\">\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { post, patch, get } from '../../utils/request'\r\nimport { reactive, toRefs } from 'vue'\r\n//  地址的新建或更新\r\nconst useTopEffect = () => {\r\n  const router = useRouter()\r\n  const route = useRoute()\r\n  const data = reactive({ address: {} })\r\n  const addressId = route.params.id\r\n  const addressObj = { }\r\n  const message = addressId ? '编辑地址' : '新建地址'\r\n  const handleBackClick = () => {\r\n    router.back()\r\n  }\r\n  const handleSaveClick = async () => {\r\n    const { city, department, housenumber, name, phone } = address.value\r\n    addressObj.city = city\r\n    addressObj.department = department\r\n    addressObj.housenumber = housenumber\r\n    addressObj.name = name\r\n    addressObj.phone = phone\r\n    if (addressId) {\r\n      //  有地址id即是更新\r\n      const res = await patch(`api/user/address/${addressId}`, addressObj)\r\n      if (res.errno === 0) { router.back() }\r\n    } else {\r\n      const res = await post('api/user/address', addressObj)\r\n      if (res.errno === 0) { router.back() }\r\n    }\r\n  }\r\n  const getAddress = async () => {\r\n    //  先获取单个收货地址(id)\r\n    const result = await get(`api/user/address/${addressId}`)\r\n    if (result?.errno === 0 && result?.data) {\r\n      data.address = result.data\r\n    }\r\n  }\r\n  const { address } = toRefs(data)\r\n  return { handleBackClick, handleSaveClick, message, getAddress, address, addressId }\r\n}\r\n\r\nexport default {\r\n  name: 'UpdateAddress',\r\n  setup () {\r\n    const { handleBackClick, message, handleSaveClick, getAddress, address, addressId } = useTopEffect()\r\n    if (addressId) getAddress()\r\n    return { handleBackClick, message, handleSaveClick, address }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n@import '../../style/mixins';\r\n.wrapper{\r\n@include wrapper;\r\n}\r\n.header{\r\n  box-sizing: border-box;\r\n  padding:0 .18rem;\r\n  display: flex;\r\n  background-color: $bgColor;\r\n  line-height:.44rem;\r\n  &__back{\r\n    font-size:.2rem;\r\n    color: #B6B6B6;\r\n  }\r\n  &__text{\r\n    flex:1;\r\n    text-align: center;\r\n    font-size: .16rem;\r\n    color: $content-fontcolor;\r\n    margin:0;\r\n  }\r\n  &__new{\r\n    font-size: .14rem;\r\n    color: $content-fontcolor;\r\n  }\r\n}\r\n.content{\r\n  margin-top:.12rem;\r\n  background-color: $bgColor;\r\n  padding:0 .18rem;\r\n  &__item{\r\n    line-height: .44rem;\r\n    border-bottom: 0.01rem solid $content-bgcolor;\r\n    font-size: .14rem;\r\n    color: $medium-fontcolor;\r\n    input{\r\n      outline: none;\r\n      border:none;\r\n      background-color:none;\r\n      color: $light-fontcolor;\r\n      @include  ellipse;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}