{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\src\\views\\address\\UpdateAddress.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\src\\views\\address\\UpdateAddress.vue","mtime":1620539087640},{"path":"C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvRGVza3RvcC9qaW5nZG9uZ2RlbW8vamluZ2RvbmctYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IHsgdXNlUm91dGVyLCB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyBwb3N0LCBwYXRjaCwgZ2V0IH0gZnJvbSAnLi4vLi4vdXRpbHMvcmVxdWVzdCc7CmltcG9ydCB7IHJlYWN0aXZlLCB0b1JlZnMgfSBmcm9tICd2dWUnOyAvLyAg5Zyw5Z2A55qE5paw5bu65oiW5pu05pawCgp2YXIgdXNlVG9wRWZmZWN0ID0gZnVuY3Rpb24gdXNlVG9wRWZmZWN0KCkgewogIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICB2YXIgcm91dGUgPSB1c2VSb3V0ZSgpOwogIHZhciBkYXRhID0gcmVhY3RpdmUoewogICAgYWRkcmVzczoge30KICB9KTsKICB2YXIgYWRkcmVzc0lkID0gcm91dGUucGFyYW1zLmlkOwogIHZhciBhZGRyZXNzT2JqID0ge307CiAgdmFyIG1lc3NhZ2UgPSBhZGRyZXNzSWQgPyAn57yW6L6R5Zyw5Z2AJyA6ICfmlrDlu7rlnLDlnYAnOwoKICB2YXIgaGFuZGxlQmFja0NsaWNrID0gZnVuY3Rpb24gaGFuZGxlQmFja0NsaWNrKCkgewogICAgcm91dGVyLmJhY2soKTsKICB9OwoKICB2YXIgaGFuZGxlU2F2ZUNsaWNrID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgX2FkZHJlc3MkdmFsdWUsIGNpdHksIGRlcGFydG1lbnQsIGhvdXNlbnVtYmVyLCBuYW1lLCBwaG9uZSwgcmVzLCBfcmVzOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9hZGRyZXNzJHZhbHVlID0gYWRkcmVzcy52YWx1ZSwgY2l0eSA9IF9hZGRyZXNzJHZhbHVlLmNpdHksIGRlcGFydG1lbnQgPSBfYWRkcmVzcyR2YWx1ZS5kZXBhcnRtZW50LCBob3VzZW51bWJlciA9IF9hZGRyZXNzJHZhbHVlLmhvdXNlbnVtYmVyLCBuYW1lID0gX2FkZHJlc3MkdmFsdWUubmFtZSwgcGhvbmUgPSBfYWRkcmVzcyR2YWx1ZS5waG9uZTsKICAgICAgICAgICAgICBhZGRyZXNzT2JqLmNpdHkgPSBjaXR5OwogICAgICAgICAgICAgIGFkZHJlc3NPYmouZGVwYXJ0bWVudCA9IGRlcGFydG1lbnQ7CiAgICAgICAgICAgICAgYWRkcmVzc09iai5ob3VzZW51bWJlciA9IGhvdXNlbnVtYmVyOwogICAgICAgICAgICAgIGFkZHJlc3NPYmoubmFtZSA9IG5hbWU7CiAgICAgICAgICAgICAgYWRkcmVzc09iai5waG9uZSA9IHBob25lOwoKICAgICAgICAgICAgICBpZiAoIWFkZHJlc3NJZCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gcGF0Y2goImFwaS91c2VyL2FkZHJlc3MvIi5jb25jYXQoYWRkcmVzc0lkKSwgYWRkcmVzc09iaik7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHJlcy5lcnJubyA9PT0gMCkgewogICAgICAgICAgICAgICAgcm91dGVyLmJhY2soKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgIHJldHVybiBwb3N0KCdhcGkvdXNlci9hZGRyZXNzJywgYWRkcmVzc09iaik7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIF9yZXMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAoX3Jlcy5lcnJubyA9PT0gMCkgewogICAgICAgICAgICAgICAgcm91dGVyLmJhY2soKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlU2F2ZUNsaWNrKCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBnZXRBZGRyZXNzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciByZXN1bHQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBnZXQoImFwaS91c2VyL2FkZHJlc3MvIi5jb25jYXQoYWRkcmVzc0lkKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgIGlmICgocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LmVycm5vKSA9PT0gMCAmJiByZXN1bHQgIT09IG51bGwgJiYgcmVzdWx0ICE9PSB2b2lkIDAgJiYgcmVzdWx0LmRhdGEpIHsKICAgICAgICAgICAgICAgIGRhdGEuYWRkcmVzcyA9IHJlc3VsdC5kYXRhOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gZ2V0QWRkcmVzcygpIHsKICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIF90b1JlZnMgPSB0b1JlZnMoZGF0YSksCiAgICAgIGFkZHJlc3MgPSBfdG9SZWZzLmFkZHJlc3M7CgogIHJldHVybiB7CiAgICBoYW5kbGVCYWNrQ2xpY2s6IGhhbmRsZUJhY2tDbGljaywKICAgIGhhbmRsZVNhdmVDbGljazogaGFuZGxlU2F2ZUNsaWNrLAogICAgbWVzc2FnZTogbWVzc2FnZSwKICAgIGdldEFkZHJlc3M6IGdldEFkZHJlc3MsCiAgICBhZGRyZXNzOiBhZGRyZXNzLAogICAgYWRkcmVzc0lkOiBhZGRyZXNzSWQKICB9Owp9OwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdVcGRhdGVBZGRyZXNzJywKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgX3VzZVRvcEVmZmVjdCA9IHVzZVRvcEVmZmVjdCgpLAogICAgICAgIGhhbmRsZUJhY2tDbGljayA9IF91c2VUb3BFZmZlY3QuaGFuZGxlQmFja0NsaWNrLAogICAgICAgIG1lc3NhZ2UgPSBfdXNlVG9wRWZmZWN0Lm1lc3NhZ2UsCiAgICAgICAgaGFuZGxlU2F2ZUNsaWNrID0gX3VzZVRvcEVmZmVjdC5oYW5kbGVTYXZlQ2xpY2ssCiAgICAgICAgZ2V0QWRkcmVzcyA9IF91c2VUb3BFZmZlY3QuZ2V0QWRkcmVzcywKICAgICAgICBhZGRyZXNzID0gX3VzZVRvcEVmZmVjdC5hZGRyZXNzLAogICAgICAgIGFkZHJlc3NJZCA9IF91c2VUb3BFZmZlY3QuYWRkcmVzc0lkOwoKICAgIGlmIChhZGRyZXNzSWQpIGdldEFkZHJlc3MoKTsKICAgIHJldHVybiB7CiAgICAgIGhhbmRsZUJhY2tDbGljazogaGFuZGxlQmFja0NsaWNrLAogICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICBoYW5kbGVTYXZlQ2xpY2s6IGhhbmRsZVNhdmVDbGljaywKICAgICAgYWRkcmVzczogYWRkcmVzcwogICAgfTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\src\\views\\address\\UpdateAddress.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n     <div class=\"header\">\r\n        <span class=\"header__back iconfont\" @click=\"handleBackClick\">&#xe697;</span>\r\n        <span class=\"header__text\">{{message}}</span>\r\n        <span class=\"header__new\" @click=\"() => { handleSaveClick() }\">保存</span>\r\n     </div>\r\n     <div class=\"content\">\r\n        <div class=\"content__item\">\r\n        所在城市:<input type=\"text\" v-model=\"address.city\" placeholder=\"如北京市朝阳区\">\r\n        </div>\r\n        <div class=\"content__item\">\r\n        小区/大厦/学校：<input type=\"text\" v-model=\"address.department\"  placeholder=\"如光华小区\">\r\n        </div>\r\n        <div class=\"content__item\">\r\n        楼号-门牌号:<input type=\"text\" v-model=\"address.housenumber\" placeholder=\"3号楼10层303\">\r\n        </div>\r\n        <div class=\"content__item\">\r\n        收货人：:<input type=\"text\" v-model=\"address.name\"  placeholder=\"如请填写收货人姓名\">\r\n        </div>\r\n        <div class=\"content__item\">\r\n        联系电话：:<input type=\"text\"  v-model=\"address.phone\" placeholder=\"请填写收货人联系电话\">\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { post, patch, get } from '../../utils/request'\r\nimport { reactive, toRefs } from 'vue'\r\n//  地址的新建或更新\r\nconst useTopEffect = () => {\r\n  const router = useRouter()\r\n  const route = useRoute()\r\n  const data = reactive({ address: {} })\r\n  const addressId = route.params.id\r\n  const addressObj = { }\r\n  const message = addressId ? '编辑地址' : '新建地址'\r\n  const handleBackClick = () => {\r\n    router.back()\r\n  }\r\n  const handleSaveClick = async () => {\r\n    const { city, department, housenumber, name, phone } = address.value\r\n    addressObj.city = city\r\n    addressObj.department = department\r\n    addressObj.housenumber = housenumber\r\n    addressObj.name = name\r\n    addressObj.phone = phone\r\n    if (addressId) {\r\n      //  有地址id即是更新\r\n      const res = await patch(`api/user/address/${addressId}`, addressObj)\r\n      if (res.errno === 0) { router.back() }\r\n    } else {\r\n      const res = await post('api/user/address', addressObj)\r\n      if (res.errno === 0) { router.back() }\r\n    }\r\n  }\r\n  const getAddress = async () => {\r\n    //  先获取单个收货地址(id)\r\n    const result = await get(`api/user/address/${addressId}`)\r\n    if (result?.errno === 0 && result?.data) {\r\n      data.address = result.data\r\n    }\r\n  }\r\n  const { address } = toRefs(data)\r\n  return { handleBackClick, handleSaveClick, message, getAddress, address, addressId }\r\n}\r\n\r\nexport default {\r\n  name: 'UpdateAddress',\r\n  setup () {\r\n    const { handleBackClick, message, handleSaveClick, getAddress, address, addressId } = useTopEffect()\r\n    if (addressId) getAddress()\r\n    return { handleBackClick, message, handleSaveClick, address }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n@import '../../style/mixins';\r\n.wrapper{\r\n@include wrapper;\r\n}\r\n.header{\r\n  box-sizing: border-box;\r\n  padding:0 .18rem;\r\n  display: flex;\r\n  background-color: $bgColor;\r\n  line-height:.44rem;\r\n  &__back{\r\n    font-size:.2rem;\r\n    color: #B6B6B6;\r\n  }\r\n  &__text{\r\n    flex:1;\r\n    text-align: center;\r\n    font-size: .16rem;\r\n    color: $content-fontcolor;\r\n    margin:0;\r\n  }\r\n  &__new{\r\n    font-size: .14rem;\r\n    color: $content-fontcolor;\r\n  }\r\n}\r\n.content{\r\n  margin-top:.12rem;\r\n  background-color: $bgColor;\r\n  padding:0 .18rem;\r\n  &__item{\r\n    line-height: .44rem;\r\n    border-bottom: 0.01rem solid $content-bgcolor;\r\n    font-size: .14rem;\r\n    color: $medium-fontcolor;\r\n    input{\r\n      outline: none;\r\n      border:none;\r\n      background-color:none;\r\n      color: $light-fontcolor;\r\n      @include  ellipse;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}