{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\src\\effects\\cartEffects.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\src\\effects\\cartEffects.js","mtime":1620525729334},{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKLy8g6LSt54mp6L2m5L+h5oGv55qE5pON5L2cCmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHRvUmVmcywgY29tcHV0ZWQgfSBmcm9tICd2dWUnOwpleHBvcnQgdmFyIHVzZUNvbW1vbkNhcnRFZmZlY3QgPSBmdW5jdGlvbiB1c2VDb21tb25DYXJ0RWZmZWN0KHNob3BJZCkgewogIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CgogIHZhciBfdG9SZWZzID0gdG9SZWZzKHN0b3JlLnN0YXRlKSwKICAgICAgY2FydExpc3QgPSBfdG9SZWZzLmNhcnRMaXN0OyAvLyAg6Kem5Y+R6LSt54mp6L2m5pu05pawCgoKICB2YXIgY2hhbmdlQ2FydEl0ZW0gPSBmdW5jdGlvbiBjaGFuZ2VDYXJ0SXRlbShzaG9wSWQsIHByb2R1Y3RJZCwgcHJvZHVjdEluZm8sIG51bSkgewogICAgc3RvcmUuY29tbWl0KCdjaGFuZ2VDYXJ0SXRlbScsIHsKICAgICAgc2hvcElkOiBzaG9wSWQsCiAgICAgIHByb2R1Y3RJZDogcHJvZHVjdElkLAogICAgICBwcm9kdWN0SW5mbzogcHJvZHVjdEluZm8sCiAgICAgIG51bTogbnVtCiAgICB9KTsKICB9OyAvLyAg5Lqn5ZOB5YiX6KGo5piv5LiA5Liq6K6h566X5bGe5oCn77yM5LiU6YeM6Z2i5Y+q5a2Y5YKo5LqG5pWw6YeP5LiN5Li6MOeahOWVhuWTgQoKCiAgdmFyIHByb2R1Y3RMaXN0ID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgdmFyIF9jYXJ0TGlzdCR2YWx1ZSRzaG9wSTsKCiAgICB2YXIgcHJvZHVjdExpc3QgPSAoKF9jYXJ0TGlzdCR2YWx1ZSRzaG9wSSA9IGNhcnRMaXN0LnZhbHVlW3Nob3BJZF0pID09PSBudWxsIHx8IF9jYXJ0TGlzdCR2YWx1ZSRzaG9wSSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhcnRMaXN0JHZhbHVlJHNob3BJLnByb2R1Y3RMaXN0KSB8fCB7fTsKICAgIHZhciBub3RFbXB0eVByb2R1Y3RMaXN0ID0ge307CiAgICB2YXIgaiA9IDA7CgogICAgZm9yICh2YXIgaSBpbiBwcm9kdWN0TGlzdCkgewogICAgICBpZiAocHJvZHVjdExpc3RbaV0uY291bnQpIHsKICAgICAgICBub3RFbXB0eVByb2R1Y3RMaXN0W2orK10gPSBwcm9kdWN0TGlzdFtpXTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBub3RFbXB0eVByb2R1Y3RMaXN0OwogIH0pOyAvLyAg5ZWG6ZO65ZCN5Lmf5piv5LiA5Liq6K6h566X5bGe5oCnCgogIHZhciBzaG9wTmFtZSA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHZhciBfY2FydExpc3QkdmFsdWUkc2hvcEkyOwoKICAgIHJldHVybiAoKF9jYXJ0TGlzdCR2YWx1ZSRzaG9wSTIgPSBjYXJ0TGlzdC52YWx1ZVtzaG9wSWRdKSA9PT0gbnVsbCB8fCBfY2FydExpc3QkdmFsdWUkc2hvcEkyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2FydExpc3QkdmFsdWUkc2hvcEkyLnNob3BOYW1lKSB8fCAnJzsKICB9KTsgLy8gIOaMieeFp+S4jeWQjOWVhumTuuiuoeeul+i0reeJqei9pumHjOeahOWVhuWTgeeahOaVsOmHjyB0b3RhbO+8jOWVhuWTgeeahOaAu+S7tyBwcmNpZe+8jOS7peWPiuWFqOmAieeKtuaAgQoKICB2YXIgY2FjdWxhdGlvbnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2NhcnRMaXN0JHZhbHVlJHNob3BJMzsKCiAgICB2YXIgcHJvZHVjdExpc3QgPSAoX2NhcnRMaXN0JHZhbHVlJHNob3BJMyA9IGNhcnRMaXN0LnZhbHVlW3Nob3BJZF0pID09PSBudWxsIHx8IF9jYXJ0TGlzdCR2YWx1ZSRzaG9wSTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jYXJ0TGlzdCR2YWx1ZSRzaG9wSTMucHJvZHVjdExpc3Q7CiAgICB2YXIgcmVzdWx0ID0gewogICAgICB0b3RhbDogMCwKICAgICAgcHJpY2U6IDAsCiAgICAgIGFsbENoZWNrOiB0cnVlCiAgICB9OwoKICAgIGlmIChwcm9kdWN0TGlzdCkgewogICAgICBmb3IgKHZhciBpIGluIHByb2R1Y3RMaXN0KSB7CiAgICAgICAgdmFyIHByb2R1Y3QgPSBwcm9kdWN0TGlzdFtpXTsKICAgICAgICByZXN1bHQudG90YWwgKz0gcHJvZHVjdC5jb3VudDsKCiAgICAgICAgaWYgKHByb2R1Y3QuY2hlY2spIHsKICAgICAgICAgIHJlc3VsdC5wcmljZSArPSBwcm9kdWN0LmNvdW50ICogcHJvZHVjdC5wcmljZTsKICAgICAgICB9CgogICAgICAgIGlmIChwcm9kdWN0LmNvdW50ID4gMCAmJiAhcHJvZHVjdC5jaGVjaykgewogICAgICAgICAgcmVzdWx0LmFsbENoZWNrID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmVzdWx0LnByaWNlID0gcmVzdWx0LnByaWNlLnRvRml4ZWQoMik7CiAgICByZXR1cm4gcmVzdWx0OwogIH0pOyAvLyAg6L+U5Zue55qE5piv6LSt54mp6L2m55qE5L+h5oGv77yM5pS55Y+Y5ZWG5ZOB5pWw6YeP55qE5pa55rOVLCDkuI3kuLow55qE5Lqn5ZOB5YiX6KGoLCDllYbpk7rlkI0s5LiA5Lqb6ZyA6KaB55qE6K6h566X5bGe5oCnKOaAu+aVsO+8jOaAu+S7t++8jOWFqOmAieeKtuaAgSkKCiAgcmV0dXJuIHsKICAgIGNhcnRMaXN0OiBjYXJ0TGlzdCwKICAgIGNoYW5nZUNhcnRJdGVtOiBjaGFuZ2VDYXJ0SXRlbSwKICAgIHByb2R1Y3RMaXN0OiBwcm9kdWN0TGlzdCwKICAgIHNob3BOYW1lOiBzaG9wTmFtZSwKICAgIGNhY3VsYXRpb25zOiBjYWN1bGF0aW9ucwogIH07Cn07"},{"version":3,"sources":["C:/Users/Administrator/Desktop/jingDong/jingdong/src/effects/cartEffects.js"],"names":["useStore","toRefs","computed","useCommonCartEffect","shopId","store","state","cartList","changeCartItem","productId","productInfo","num","commit","productList","value","notEmptyProductList","j","i","count","shopName","caculations","result","total","price","allCheck","product","check","toFixed"],"mappings":";AAAA;AACA,SAASA,QAAT,QAAyB,MAAzB;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,KAAjC;AACA,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,MAAD,EAAY;AAC7C,MAAMC,KAAK,GAAGL,QAAQ,EAAtB;;AACA,gBAAqBC,MAAM,CAACI,KAAK,CAACC,KAAP,CAA3B;AAAA,MAAQC,QAAR,WAAQA,QAAR,CAF6C,CAG7C;;;AACA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACJ,MAAD,EAASK,SAAT,EAAoBC,WAApB,EAAiCC,GAAjC,EAAyC;AAC9DN,IAAAA,KAAK,CAACO,MAAN,CAAa,gBAAb,EAA+B;AAAER,MAAAA,MAAM,EAANA,MAAF;AAAUK,MAAAA,SAAS,EAATA,SAAV;AAAqBC,MAAAA,WAAW,EAAXA,WAArB;AAAkCC,MAAAA,GAAG,EAAHA;AAAlC,KAA/B;AACD,GAFD,CAJ6C,CAO7C;;;AACA,MAAME,WAAW,GAAGX,QAAQ,CAAC,YAAM;AAAA;;AACjC,QAAMW,WAAW,GAAG,0BAAAN,QAAQ,CAACO,KAAT,CAAeV,MAAf,iFAAwBS,WAAxB,KAAuC,EAA3D;AACA,QAAME,mBAAmB,GAAG,EAA5B;AACA,QAAIC,CAAC,GAAG,CAAR;;AACA,SAAK,IAAMC,CAAX,IAAgBJ,WAAhB,EAA6B;AAC3B,UAAIA,WAAW,CAACI,CAAD,CAAX,CAAeC,KAAnB,EAA0B;AAAEH,QAAAA,mBAAmB,CAACC,CAAC,EAAF,CAAnB,GAA2BH,WAAW,CAACI,CAAD,CAAtC;AAA2C;AACxE;;AACD,WAAOF,mBAAP;AACD,GAR2B,CAA5B,CAR6C,CAiB7C;;AACA,MAAMI,QAAQ,GAAGjB,QAAQ,CAAC,YAAM;AAAA;;AAC9B,WAAO,2BAAAK,QAAQ,CAACO,KAAT,CAAeV,MAAf,mFAAwBe,QAAxB,KAAoC,EAA3C;AACD,GAFwB,CAAzB,CAlB6C,CAqB7C;;AACA,MAAMC,WAAW,GAAGlB,QAAQ,CAAC,YAAM;AAAA;;AACjC,QAAMW,WAAW,6BAAGN,QAAQ,CAACO,KAAT,CAAeV,MAAf,CAAH,2DAAG,uBAAwBS,WAA5C;AACA,QAAMQ,MAAM,GAAG;AAAEC,MAAAA,KAAK,EAAE,CAAT;AAAYC,MAAAA,KAAK,EAAE,CAAnB;AAAsBC,MAAAA,QAAQ,EAAE;AAAhC,KAAf;;AACA,QAAIX,WAAJ,EAAiB;AACf,WAAK,IAAMI,CAAX,IAAgBJ,WAAhB,EAA6B;AAC3B,YAAMY,OAAO,GAAGZ,WAAW,CAACI,CAAD,CAA3B;AACAI,QAAAA,MAAM,CAACC,KAAP,IAAgBG,OAAO,CAACP,KAAxB;;AACA,YAAIO,OAAO,CAACC,KAAZ,EAAmB;AACjBL,UAAAA,MAAM,CAACE,KAAP,IAAgBE,OAAO,CAACP,KAAR,GAAgBO,OAAO,CAACF,KAAxC;AACD;;AACD,YAAIE,OAAO,CAACP,KAAR,GAAgB,CAAhB,IAAqB,CAACO,OAAO,CAACC,KAAlC,EAAyC;AACvCL,UAAAA,MAAM,CAACG,QAAP,GAAkB,KAAlB;AACD;AACF;AACF;;AACDH,IAAAA,MAAM,CAACE,KAAP,GAAeF,MAAM,CAACE,KAAP,CAAaI,OAAb,CAAqB,CAArB,CAAf;AACA,WAAON,MAAP;AACD,GAjB2B,CAA5B,CAtB6C,CAwC7C;;AACA,SAAO;AAAEd,IAAAA,QAAQ,EAARA,QAAF;AAAYC,IAAAA,cAAc,EAAdA,cAAZ;AAA4BK,IAAAA,WAAW,EAAXA,WAA5B;AAAyCM,IAAAA,QAAQ,EAARA,QAAzC;AAAmDC,IAAAA,WAAW,EAAXA;AAAnD,GAAP;AACD,CA1CM","sourcesContent":["// 购物车信息的操作\r\nimport { useStore } from 'vuex'\r\nimport { toRefs, computed } from 'vue'\r\nexport const useCommonCartEffect = (shopId) => {\r\n  const store = useStore()\r\n  const { cartList } = toRefs(store.state)\r\n  //  触发购物车更新\r\n  const changeCartItem = (shopId, productId, productInfo, num) => {\r\n    store.commit('changeCartItem', { shopId, productId, productInfo, num })\r\n  }\r\n  //  产品列表是一个计算属性，且里面只存储了数量不为0的商品\r\n  const productList = computed(() => {\r\n    const productList = cartList.value[shopId]?.productList || {}\r\n    const notEmptyProductList = {}\r\n    let j = 0\r\n    for (const i in productList) {\r\n      if (productList[i].count) { notEmptyProductList[j++] = productList[i] }\r\n    }\r\n    return notEmptyProductList\r\n  })\r\n  //  商铺名也是一个计算属性\r\n  const shopName = computed(() => {\r\n    return cartList.value[shopId]?.shopName || ''\r\n  })\r\n  //  按照不同商铺计算购物车里的商品的数量 total，商品的总价 prcie，以及全选状态\r\n  const caculations = computed(() => {\r\n    const productList = cartList.value[shopId]?.productList\r\n    const result = { total: 0, price: 0, allCheck: true }\r\n    if (productList) {\r\n      for (const i in productList) {\r\n        const product = productList[i]\r\n        result.total += product.count\r\n        if (product.check) {\r\n          result.price += product.count * product.price\r\n        }\r\n        if (product.count > 0 && !product.check) {\r\n          result.allCheck = false\r\n        }\r\n      }\r\n    }\r\n    result.price = result.price.toFixed(2)\r\n    return result\r\n  })\r\n  //  返回的是购物车的信息，改变商品数量的方法, 不为0的产品列表, 商铺名,一些需要的计算属性(总数，总价，全选状态)\r\n  return { cartList, changeCartItem, productList, shopName, caculations }\r\n}\r\n"]}]}