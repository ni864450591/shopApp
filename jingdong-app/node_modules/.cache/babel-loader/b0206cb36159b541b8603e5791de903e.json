{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\src\\views\\login\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\src\\views\\login\\Login.vue","mtime":1620536280673},{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvRGVza3RvcC9qaW5nRG9uZy9qaW5nZG9uZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgcmVhY3RpdmUsIHRvUmVmcyB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyBwb3N0IH0gZnJvbSAnLi4vLi4vdXRpbHMvcmVxdWVzdCc7CmltcG9ydCBUb2FzdCwgeyB1c2VUb2FzdEVmZmVjdCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvVG9hc3QnOyAvLyDov5nph4zmir3nprvnmbvlvZXnmoTpgLvovpHlkozmlbDmja4KLy8gIOmAu+i+keaAnei3rwovLyAgMeOAgeimgeWHhuWkh+WlvXVzZXJuYW1lIHBhc3N3b3Jk5o6l5pS255So5oi355qE6L6T5YWl77yM5bm26L+b6KGM5Y+M5ZCR5pWw5o2u57uR5a6aIHYtbW9kZWwKLy8gIDLjgIHlvZPnlKjmiLfmjInkuIvnmbvlvZXmjInpkq7opoHlpITnkIbnmoTkuovmg4XvvIzliKTmlq3nlKjmiLfnmoTovpPlhaXmmK/lkKblkIjms5XvvIzlkIjms5Xlho3ov5vooYzlkI7nq6/lj5HpgIEKLy8gKOWOu+eci+WQjuerr+eahEFQSeimgeaxgikg5ZCO56uv5p+l6K+i5piv5ZCm5a2Y5Zyo6L+Z5Liq55So5oi35LiU5a+G56CB5piv5ZCm5q2j56GuCi8vICAz44CB6L+U5Zue5LiA5Liq5Y+v5ZCm55m75b2V55qE5qCH5b+XCi8vICA044CB6Iul55m75b2V5aSx6LSl5YiZ5by55Ye655m75b2V5aSx6LSl5by556qXCi8vICA144CB6Iul55m75b2V5oiQ5Yqf5YiZ6L+b5YWl6aaW6aG1Cgp2YXIgdXNlTG9naW5FZmZmZWN0ID0gZnVuY3Rpb24gdXNlTG9naW5FZmZmZWN0KHRvYXN0TWVzc2FnZSkgewogIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICB2YXIgZGF0YSA9IHJlYWN0aXZlKHsKICAgIHVzZXJuYW1lOiAnJywKICAgIHBhc3N3b3JkOiAnJwogIH0pOwoKICB2YXIgaGFuZGxlTG9naW4gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBfdXNlcm5hbWUsIF9wYXNzd29yZCwgcmVzdWx0OwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgIF91c2VybmFtZSA9IGRhdGEudXNlcm5hbWUsIF9wYXNzd29yZCA9IGRhdGEucGFzc3dvcmQ7IC8vICDlpoLmnpznlKjmiLfmsqHovpPlhaXotKblj7flkozlr4bnoIHlsLHlvLnlh7oKCiAgICAgICAgICAgICAgaWYgKCEoX3VzZXJuYW1lID09PSAnJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoJ+ivt+i+k+WFpeeUqOaIt+WQjScpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGlmICghKF9wYXNzd29yZCA9PT0gJycpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdG9hc3RNZXNzYWdlKCfor7fovpPlhaXlr4bnoIEnKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgcmV0dXJuIHBvc3QoJ2FwaS91c2VyL2xvZ2luJywgewogICAgICAgICAgICAgICAgdXNlcm5hbWU6IF91c2VybmFtZSwKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBfcGFzc3dvcmQKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgLy8gIOato+ehruWQjuaMh+Wumui3s+WIsOmmlumhte+8jOayoeacieWwseW8ueWHuueZu+W9leWksei0pQogICAgICAgICAgICAgIGlmIChyZXN1bHQuZXJybm8gPT09IDApIHsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5pc0xvZ2luID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ0hvbWUnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdG9hc3RNZXNzYWdlKCfnmbvlvZXlpLHotKUnKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE0OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgdG9hc3RNZXNzYWdlKCfor7fmsYLlpLHotKUnKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTRdXSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUxvZ2luKCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBfdG9SZWZzID0gdG9SZWZzKGRhdGEpLAogICAgICB1c2VybmFtZSA9IF90b1JlZnMudXNlcm5hbWUsCiAgICAgIHBhc3N3b3JkID0gX3RvUmVmcy5wYXNzd29yZDsKCiAgcmV0dXJuIHsKICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgIGhhbmRsZUxvZ2luOiBoYW5kbGVMb2dpbgogIH07Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0xvZ2luJywKICBjb21wb25lbnRzOiB7CiAgICBUb2FzdDogVG9hc3QKICB9LAogIC8vIHNldHVw5aSn5aSa5pe25YCZ5bCx5piv5ZGK6K+J5L2g5omn6KGM55qE5rWB56iLCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIF91c2VUb2FzdEVmZmVjdCA9IHVzZVRvYXN0RWZmZWN0KCksCiAgICAgICAgc2hvd1RvYXN0ID0gX3VzZVRvYXN0RWZmZWN0LnNob3dUb2FzdCwKICAgICAgICB0b2FzdG1lc3NhZ2UgPSBfdXNlVG9hc3RFZmZlY3QudG9hc3RtZXNzYWdlLAogICAgICAgIHRvYXN0TWVzc2FnZSA9IF91c2VUb2FzdEVmZmVjdC50b2FzdE1lc3NhZ2U7CgogICAgdmFyIF91c2VMb2dpbkVmZmZlY3QgPSB1c2VMb2dpbkVmZmZlY3QodG9hc3RNZXNzYWdlKSwKICAgICAgICB1c2VybmFtZSA9IF91c2VMb2dpbkVmZmZlY3QudXNlcm5hbWUsCiAgICAgICAgcGFzc3dvcmQgPSBfdXNlTG9naW5FZmZmZWN0LnBhc3N3b3JkLAogICAgICAgIGhhbmRsZUxvZ2luID0gX3VzZUxvZ2luRWZmZmVjdC5oYW5kbGVMb2dpbjsKCiAgICByZXR1cm4gewogICAgICBoYW5kbGVMb2dpbjogaGFuZGxlTG9naW4sCiAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLAogICAgICBzaG93VG9hc3Q6IHNob3dUb2FzdCwKICAgICAgdG9hc3RtZXNzYWdlOiB0b2FzdG1lc3NhZ2UKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\jingDong\\jingdong\\src\\views\\login\\Login.vue"],"names":[],"mappings":";;AA8BA,SAAS,QAAT,EAAmB,MAAnB,QAAiC,KAAjC;AACA,SAAS,SAAT,QAA0B,YAA1B;AACA,SAAS,IAAT,QAAqB,qBAArB;AACA,OAAO,KAAP,IAAgB,cAAhB,QAAsC,wBAAtC,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM,eAAc,GAAI,SAAlB,eAAkB,CAAC,YAAD,EAAkB;AACxC,MAAM,MAAK,GAAI,SAAS,EAAxB;AACA,MAAM,IAAG,GAAI,QAAQ,CAAC;AACpB,IAAA,QAAQ,EAAE,EADU;AAEpB,IAAA,QAAQ,EAAE;AAFU,GAAD,CAArB;;AAIA,MAAM,WAAU;AAAA,uEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAER,cAAA,SAFQ,GAEe,IAFf,CAER,QAFQ,EAEE,SAFF,GAEe,IAFf,CAEE,QAFF,EAGhB;;AAHgB,oBAIZ,SAAO,KAAM,EAJD;AAAA;AAAA;AAAA;;AAKd,cAAA,YAAY,CAAC,QAAD,CAAZ;AALc;;AAAA;AAAA,oBAQZ,SAAO,KAAM,EARD;AAAA;AAAA;AAAA;;AASd,cAAA,YAAY,CAAC,OAAD,CAAZ;AATc;;AAAA;AAAA;AAAA,qBAaK,IAAI,CAAC,gBAAD,EAAmB;AAC1C,gBAAA,QAAQ,EAAR,SAD0C;AAE1C,gBAAA,QAAO,EAAP;AAF0C,eAAnB,CAbT;;AAAA;AAaV,cAAA,MAbU;;AAiBhB;AACA,kBAAI,MAAM,CAAC,KAAP,KAAiB,CAArB,EAAwB;AACtB,gBAAA,YAAY,CAAC,OAAb,GAAuB,IAAvB;AACA,gBAAA,MAAM,CAAC,IAAP,CAAY;AAAE,kBAAA,IAAI,EAAE;AAAR,iBAAZ;AACF,eAHA,MAGO;AACL,gBAAA,YAAY,CAAC,MAAD,CAAZ;AACF;;AAvBgB;AAAA;;AAAA;AAAA;AAAA;AAyBhB,cAAA,YAAY,CAAC,MAAD,CAAZ;;AAzBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA,oBAAV,WAAU;AAAA;AAAA;AAAA,KAAhB;;AA4BA,gBAA+B,MAAM,CAAC,IAAD,CAArC;AAAA,MAAQ,QAAR,WAAQ,QAAR;AAAA,MAAkB,QAAlB,WAAkB,QAAlB;;AACA,SAAO;AAAE,IAAA,QAAQ,EAAR,QAAF;AAAY,IAAA,QAAQ,EAAR,QAAZ;AAAsB,IAAA,WAAU,EAAV;AAAtB,GAAP;AACF,CApCA;;AAsCA,eAAe;AACb,EAAA,IAAI,EAAE,OADO;AAEb,EAAA,UAAU,EAAE;AAAE,IAAA,KAAI,EAAJ;AAAF,GAFC;AAIb;AACA,EAAA,KALa,mBAKJ;AACP,0BAAkD,cAAc,EAAhE;AAAA,QAAQ,SAAR,mBAAQ,SAAR;AAAA,QAAmB,YAAnB,mBAAmB,YAAnB;AAAA,QAAiC,YAAjC,mBAAiC,YAAjC;;AACA,2BAA4C,eAAe,CAAC,YAAD,CAA3D;AAAA,QAAQ,QAAR,oBAAQ,QAAR;AAAA,QAAkB,QAAlB,oBAAkB,QAAlB;AAAA,QAA4B,WAA5B,oBAA4B,WAA5B;;AAEA,WAAO;AAAE,MAAA,WAAW,EAAX,WAAF;AAAe,MAAA,QAAQ,EAAR,QAAf;AAAyB,MAAA,QAAQ,EAAR,QAAzB;AAAmC,MAAA,SAAS,EAAT,SAAnC;AAA8C,MAAA,YAAW,EAAX;AAA9C,KAAP;AACF;AAVa,CAAf","sourcesContent":["<template>\r\n    <div class=\"wrapper\">\r\n        <img src=\"http://www.dell-lee.com/imgs/vue3/user.png\" class=\"wrapper__img\"/>\r\n        <div class=\"wrapper__input\">\r\n            <input\r\n            type=\"text\"\r\n            class=\"wrapper__input__content\"\r\n            placeholder=\"请输入用户名\"\r\n            v-model=\"username\"\r\n            />\r\n        </div>\r\n        <div class=\"wrapper__input\">\r\n            <input\r\n              type=\"password\"\r\n              class=\"wrapper__input__content\"\r\n              placeholder=\"请输入密码\"\r\n              v-model=\"password\"\r\n              autocomplete=\"new-password\"\r\n            />\r\n        </div>\r\n        <div class=\"wrapper__login-button\" @click=\"handleLogin\">登陆</div>\r\n        <router-link :to=\"{path: '/register'}\">\r\n          <div class=\"wrapper__login-link\">立即注册</div>\r\n        </router-link>\r\n        <!-- 弹窗的显示 -->\r\n        <Toast v-if = 'showToast' :message = 'toastmessage'/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { post } from '../../utils/request'\r\nimport Toast, { useToastEffect } from '../../components/Toast'\r\n\r\n// 这里抽离登录的逻辑和数据\r\n//  逻辑思路\r\n//  1、要准备好username password接收用户的输入，并进行双向数据绑定 v-model\r\n//  2、当用户按下登录按钮要处理的事情，判断用户的输入是否合法，合法再进行后端发送\r\n// (去看后端的API要求) 后端查询是否存在这个用户且密码是否正确\r\n//  3、返回一个可否登录的标志\r\n//  4、若登录失败则弹出登录失败弹窗\r\n//  5、若登录成功则进入首页\r\nconst useLoginEfffect = (toastMessage) => {\r\n  const router = useRouter()\r\n  const data = reactive({\r\n    username: '',\r\n    password: ''\r\n  })\r\n  const handleLogin = async () => {\r\n    try {\r\n      const { username, password } = data\r\n      //  如果用户没输入账号和密码就弹出\r\n      if (username === '') {\r\n        toastMessage('请输入用户名')\r\n        return\r\n      }\r\n      if (password === '') {\r\n        toastMessage('请输入密码')\r\n        return\r\n      }\r\n      //  这里又跳到了后端\r\n      const result = await post('api/user/login', {\r\n        username,\r\n        password\r\n      })\r\n      //  正确后指定跳到首页，没有就弹出登录失败\r\n      if (result.errno === 0) {\r\n        localStorage.isLogin = true\r\n        router.push({ name: 'Home' })\r\n      } else {\r\n        toastMessage('登录失败')\r\n      }\r\n    } catch (e) {\r\n      toastMessage('请求失败')\r\n    }\r\n  }\r\n  const { username, password } = toRefs(data)\r\n  return { username, password, handleLogin }\r\n}\r\n\r\nexport default {\r\n  name: 'Login',\r\n  components: { Toast },\r\n\r\n  // setup大多时候就是告诉你执行的流程\r\n  setup () {\r\n    const { showToast, toastmessage, toastMessage } = useToastEffect()\r\n    const { username, password, handleLogin } = useLoginEfffect(toastMessage)\r\n\r\n    return { handleLogin, username, password, showToast, toastmessage }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n.wrapper{\r\n    position:absolute;\r\n    top:50%;\r\n    left:0;\r\n    right:0;\r\n    transform: translateY(-50%);\r\n    &__img{\r\n        display: block;\r\n        width: .66rem;\r\n        height:.66rem;\r\n        margin: 0 auto .4rem auto;\r\n    }\r\n    &__input{\r\n        background: #F9F9F9;\r\n        border: .01rem solid rgba(0,0,0,0.10);\r\n        border-radius: .06rem;\r\n        height: .48rem;\r\n        margin:0 .4rem .16rem .4rem;\r\n        box-sizing: border-box;\r\n        padding:0 .16rem;\r\n        &__content{\r\n            border:none;\r\n            outline: none;\r\n            background: none;\r\n            width:100%;\r\n            line-height: .42rem;\r\n            font-size: .16rem;\r\n            color:$content-notice-fontcolor;\r\n        }\r\n    }\r\n    &__login-button{\r\n        background:$btn-color;\r\n        box-shadow: 0 .04rem .08rem 0 rgba(0,145,255,0.32);\r\n        border-radius: .04rem;\r\n        margin:.32rem .4rem .16rem .4rem;\r\n        text-align: center;\r\n        font-size: .16rem;\r\n        color: $bgColor;\r\n        line-height: .48rem;\r\n    }\r\n    &__login-link{\r\n        text-align: center;\r\n        font-size: .16rem;\r\n        color:$content-notice-fontcolor;\r\n    }\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}