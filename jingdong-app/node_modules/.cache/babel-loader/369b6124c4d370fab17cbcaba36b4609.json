{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\src\\views\\login\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\src\\views\\login\\Login.vue","mtime":1620536422082},{"path":"C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvRGVza3RvcC9qaW5nZG9uZ2RlbW8vamluZ2RvbmctYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyByZWFjdGl2ZSwgdG9SZWZzIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCB7IHBvc3QgfSBmcm9tICcuLi8uLi91dGlscy9yZXF1ZXN0JzsKaW1wb3J0IFRvYXN0LCB7IHVzZVRvYXN0RWZmZWN0IH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Ub2FzdCc7IC8vIOi/memHjOaKveemu+eZu+W9leeahOmAu+i+keWSjOaVsOaNrgovLyAg6YC76L6R5oCd6LevCi8vICAx44CB6KaB5YeG5aSH5aW9dXNlcm5hbWUgcGFzc3dvcmTmjqXmlLbnlKjmiLfnmoTovpPlhaXvvIzlubbov5vooYzlj4zlkJHmlbDmja7nu5Hlrpogdi1tb2RlbAovLyAgMuOAgeW9k+eUqOaIt+aMieS4i+eZu+W9leaMiemSruimgeWkhOeQhueahOS6i+aDhe+8jOWIpOaWreeUqOaIt+eahOi+k+WFpeaYr+WQpuWQiOazle+8jOWQiOazleWGjei/m+ihjOWQjuerr+WPkemAgQovLyAo5Y6755yL5ZCO56uv55qEQVBJ6KaB5rGC5ZKM6L+U5Zue55qE5pWw5o2uKSDlkI7nq6/mn6Xor6LmmK/lkKblrZjlnKjov5nkuKrnlKjmiLfkuJTlr4bnoIHmmK/lkKbmraPnoa4KLy8gIDPjgIHov5Tlm57kuIDkuKrlj6/lkKbnmbvlvZXnmoTmoIflv5cKLy8gIDTjgIHoi6XnmbvlvZXlpLHotKXliJnlvLnlh7rnmbvlvZXlpLHotKXlvLnnqpcKLy8gIDXjgIHoi6XnmbvlvZXmiJDlip/liJnov5vlhaXpppbpobUKCnZhciB1c2VMb2dpbkVmZmZlY3QgPSBmdW5jdGlvbiB1c2VMb2dpbkVmZmZlY3QodG9hc3RNZXNzYWdlKSB7CiAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwogIHZhciBkYXRhID0gcmVhY3RpdmUoewogICAgdXNlcm5hbWU6ICcnLAogICAgcGFzc3dvcmQ6ICcnCiAgfSk7CgogIHZhciBoYW5kbGVMb2dpbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIF91c2VybmFtZSwgX3Bhc3N3b3JkLCByZXN1bHQ7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgX3VzZXJuYW1lID0gZGF0YS51c2VybmFtZSwgX3Bhc3N3b3JkID0gZGF0YS5wYXNzd29yZDsgLy8gIOWmguaenOeUqOaIt+ayoei+k+WFpei0puWPt+WSjOWvhueggeWwseW8ueWHugoKICAgICAgICAgICAgICBpZiAoIShfdXNlcm5hbWUgPT09ICcnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRvYXN0TWVzc2FnZSgn6K+36L6T5YWl55So5oi35ZCNJyk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgaWYgKCEoX3Bhc3N3b3JkID09PSAnJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoJ+ivt+i+k+WFpeWvhueggScpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICByZXR1cm4gcG9zdCgnYXBpL3VzZXIvbG9naW4nLCB7CiAgICAgICAgICAgICAgICB1c2VybmFtZTogX3VzZXJuYW1lLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IF9wYXNzd29yZAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAvLyAg5q2j56Gu5ZCO5oyH5a6a6Lez5Yiw6aaW6aG177yM5rKh5pyJ5bCx5by55Ye655m75b2V5aSx6LSlCiAgICAgICAgICAgICAgaWYgKHJlc3VsdC5lcnJubyA9PT0gMCkgewogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmlzTG9naW4gPSB0cnVlOwogICAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAnSG9tZScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoJ+eZu+W9leWksei0pScpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTQ7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoJ+ivt+axguWksei0pScpOwoKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCAxNF1dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlTG9naW4oKSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIF90b1JlZnMgPSB0b1JlZnMoZGF0YSksCiAgICAgIHVzZXJuYW1lID0gX3RvUmVmcy51c2VybmFtZSwKICAgICAgcGFzc3dvcmQgPSBfdG9SZWZzLnBhc3N3b3JkOwoKICByZXR1cm4gewogICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgcGFzc3dvcmQ6IHBhc3N3b3JkLAogICAgaGFuZGxlTG9naW46IGhhbmRsZUxvZ2luCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGNvbXBvbmVudHM6IHsKICAgIFRvYXN0OiBUb2FzdAogIH0sCiAgLy8gc2V0dXDlpKflpJrml7blgJnlsLHmmK/lkYror4nkvaDmiafooYznmoTmtYHnqIsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgX3VzZVRvYXN0RWZmZWN0ID0gdXNlVG9hc3RFZmZlY3QoKSwKICAgICAgICBzaG93VG9hc3QgPSBfdXNlVG9hc3RFZmZlY3Quc2hvd1RvYXN0LAogICAgICAgIHRvYXN0bWVzc2FnZSA9IF91c2VUb2FzdEVmZmVjdC50b2FzdG1lc3NhZ2UsCiAgICAgICAgdG9hc3RNZXNzYWdlID0gX3VzZVRvYXN0RWZmZWN0LnRvYXN0TWVzc2FnZTsKCiAgICB2YXIgX3VzZUxvZ2luRWZmZmVjdCA9IHVzZUxvZ2luRWZmZmVjdCh0b2FzdE1lc3NhZ2UpLAogICAgICAgIHVzZXJuYW1lID0gX3VzZUxvZ2luRWZmZmVjdC51c2VybmFtZSwKICAgICAgICBwYXNzd29yZCA9IF91c2VMb2dpbkVmZmZlY3QucGFzc3dvcmQsCiAgICAgICAgaGFuZGxlTG9naW4gPSBfdXNlTG9naW5FZmZmZWN0LmhhbmRsZUxvZ2luOwoKICAgIHJldHVybiB7CiAgICAgIGhhbmRsZUxvZ2luOiBoYW5kbGVMb2dpbiwKICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICAgIHNob3dUb2FzdDogc2hvd1RvYXN0LAogICAgICB0b2FzdG1lc3NhZ2U6IHRvYXN0bWVzc2FnZQogICAgfTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\jingdongdemo\\jingdong-app\\src\\views\\login\\Login.vue"],"names":[],"mappings":";;AA8BA,SAAS,QAAT,EAAmB,MAAnB,QAAiC,KAAjC;AACA,SAAS,SAAT,QAA0B,YAA1B;AACA,SAAS,IAAT,QAAqB,qBAArB;AACA,OAAO,KAAP,IAAgB,cAAhB,QAAsC,wBAAtC,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM,eAAc,GAAI,SAAlB,eAAkB,CAAC,YAAD,EAAkB;AACxC,MAAM,MAAK,GAAI,SAAS,EAAxB;AACA,MAAM,IAAG,GAAI,QAAQ,CAAC;AACpB,IAAA,QAAQ,EAAE,EADU;AAEpB,IAAA,QAAQ,EAAE;AAFU,GAAD,CAArB;;AAIA,MAAM,WAAU;AAAA,uEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAER,cAAA,SAFQ,GAEe,IAFf,CAER,QAFQ,EAEE,SAFF,GAEe,IAFf,CAEE,QAFF,EAGhB;;AAHgB,oBAIZ,SAAO,KAAM,EAJD;AAAA;AAAA;AAAA;;AAKd,cAAA,YAAY,CAAC,QAAD,CAAZ;AALc;;AAAA;AAAA,oBAQZ,SAAO,KAAM,EARD;AAAA;AAAA;AAAA;;AASd,cAAA,YAAY,CAAC,OAAD,CAAZ;AATc;;AAAA;AAAA;AAAA,qBAaK,IAAI,CAAC,gBAAD,EAAmB;AAC1C,gBAAA,QAAQ,EAAR,SAD0C;AAE1C,gBAAA,QAAO,EAAP;AAF0C,eAAnB,CAbT;;AAAA;AAaV,cAAA,MAbU;;AAiBhB;AACA,kBAAI,MAAM,CAAC,KAAP,KAAiB,CAArB,EAAwB;AACtB,gBAAA,YAAY,CAAC,OAAb,GAAuB,IAAvB;AACA,gBAAA,MAAM,CAAC,IAAP,CAAY;AAAE,kBAAA,IAAI,EAAE;AAAR,iBAAZ;AACF,eAHA,MAGO;AACL,gBAAA,YAAY,CAAC,MAAD,CAAZ;AACF;;AAvBgB;AAAA;;AAAA;AAAA;AAAA;AAyBhB,cAAA,YAAY,CAAC,MAAD,CAAZ;;AAzBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA,oBAAV,WAAU;AAAA;AAAA;AAAA,KAAhB;;AA4BA,gBAA+B,MAAM,CAAC,IAAD,CAArC;AAAA,MAAQ,QAAR,WAAQ,QAAR;AAAA,MAAkB,QAAlB,WAAkB,QAAlB;;AACA,SAAO;AAAE,IAAA,QAAQ,EAAR,QAAF;AAAY,IAAA,QAAQ,EAAR,QAAZ;AAAsB,IAAA,WAAU,EAAV;AAAtB,GAAP;AACF,CApCA;;AAsCA,eAAe;AACb,EAAA,IAAI,EAAE,OADO;AAEb,EAAA,UAAU,EAAE;AAAE,IAAA,KAAI,EAAJ;AAAF,GAFC;AAIb;AACA,EAAA,KALa,mBAKJ;AACP,0BAAkD,cAAc,EAAhE;AAAA,QAAQ,SAAR,mBAAQ,SAAR;AAAA,QAAmB,YAAnB,mBAAmB,YAAnB;AAAA,QAAiC,YAAjC,mBAAiC,YAAjC;;AACA,2BAA4C,eAAe,CAAC,YAAD,CAA3D;AAAA,QAAQ,QAAR,oBAAQ,QAAR;AAAA,QAAkB,QAAlB,oBAAkB,QAAlB;AAAA,QAA4B,WAA5B,oBAA4B,WAA5B;;AAEA,WAAO;AAAE,MAAA,WAAW,EAAX,WAAF;AAAe,MAAA,QAAQ,EAAR,QAAf;AAAyB,MAAA,QAAQ,EAAR,QAAzB;AAAmC,MAAA,SAAS,EAAT,SAAnC;AAA8C,MAAA,YAAW,EAAX;AAA9C,KAAP;AACF;AAVa,CAAf","sourcesContent":["<template>\r\n    <div class=\"wrapper\">\r\n        <img src=\"http://www.dell-lee.com/imgs/vue3/user.png\" class=\"wrapper__img\"/>\r\n        <div class=\"wrapper__input\">\r\n            <input\r\n            type=\"text\"\r\n            class=\"wrapper__input__content\"\r\n            placeholder=\"请输入用户名\"\r\n            v-model=\"username\"\r\n            />\r\n        </div>\r\n        <div class=\"wrapper__input\">\r\n            <input\r\n              type=\"password\"\r\n              class=\"wrapper__input__content\"\r\n              placeholder=\"请输入密码\"\r\n              v-model=\"password\"\r\n              autocomplete=\"new-password\"\r\n            />\r\n        </div>\r\n        <div class=\"wrapper__login-button\" @click=\"handleLogin\">登陆</div>\r\n        <router-link :to=\"{path: '/register'}\">\r\n          <div class=\"wrapper__login-link\">立即注册</div>\r\n        </router-link>\r\n        <!-- 弹窗的显示 -->\r\n        <Toast v-if = 'showToast' :message = 'toastmessage'/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { post } from '../../utils/request'\r\nimport Toast, { useToastEffect } from '../../components/Toast'\r\n\r\n// 这里抽离登录的逻辑和数据\r\n//  逻辑思路\r\n//  1、要准备好username password接收用户的输入，并进行双向数据绑定 v-model\r\n//  2、当用户按下登录按钮要处理的事情，判断用户的输入是否合法，合法再进行后端发送\r\n// (去看后端的API要求和返回的数据) 后端查询是否存在这个用户且密码是否正确\r\n//  3、返回一个可否登录的标志\r\n//  4、若登录失败则弹出登录失败弹窗\r\n//  5、若登录成功则进入首页\r\nconst useLoginEfffect = (toastMessage) => {\r\n  const router = useRouter()\r\n  const data = reactive({\r\n    username: '',\r\n    password: ''\r\n  })\r\n  const handleLogin = async () => {\r\n    try {\r\n      const { username, password } = data\r\n      //  如果用户没输入账号和密码就弹出\r\n      if (username === '') {\r\n        toastMessage('请输入用户名')\r\n        return\r\n      }\r\n      if (password === '') {\r\n        toastMessage('请输入密码')\r\n        return\r\n      }\r\n      //  这里又跳到了后端\r\n      const result = await post('api/user/login', {\r\n        username,\r\n        password\r\n      })\r\n      //  正确后指定跳到首页，没有就弹出登录失败\r\n      if (result.errno === 0) {\r\n        localStorage.isLogin = true\r\n        router.push({ name: 'Home' })\r\n      } else {\r\n        toastMessage('登录失败')\r\n      }\r\n    } catch (e) {\r\n      toastMessage('请求失败')\r\n    }\r\n  }\r\n  const { username, password } = toRefs(data)\r\n  return { username, password, handleLogin }\r\n}\r\n\r\nexport default {\r\n  name: 'Login',\r\n  components: { Toast },\r\n\r\n  // setup大多时候就是告诉你执行的流程\r\n  setup () {\r\n    const { showToast, toastmessage, toastMessage } = useToastEffect()\r\n    const { username, password, handleLogin } = useLoginEfffect(toastMessage)\r\n\r\n    return { handleLogin, username, password, showToast, toastmessage }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n.wrapper{\r\n    position:absolute;\r\n    top:50%;\r\n    left:0;\r\n    right:0;\r\n    transform: translateY(-50%);\r\n    &__img{\r\n        display: block;\r\n        width: .66rem;\r\n        height:.66rem;\r\n        margin: 0 auto .4rem auto;\r\n    }\r\n    &__input{\r\n        background: #F9F9F9;\r\n        border: .01rem solid rgba(0,0,0,0.10);\r\n        border-radius: .06rem;\r\n        height: .48rem;\r\n        margin:0 .4rem .16rem .4rem;\r\n        box-sizing: border-box;\r\n        padding:0 .16rem;\r\n        &__content{\r\n            border:none;\r\n            outline: none;\r\n            background: none;\r\n            width:100%;\r\n            line-height: .42rem;\r\n            font-size: .16rem;\r\n            color:$content-notice-fontcolor;\r\n        }\r\n    }\r\n    &__login-button{\r\n        background:$btn-color;\r\n        box-shadow: 0 .04rem .08rem 0 rgba(0,145,255,0.32);\r\n        border-radius: .04rem;\r\n        margin:.32rem .4rem .16rem .4rem;\r\n        text-align: center;\r\n        font-size: .16rem;\r\n        color: $bgColor;\r\n        line-height: .48rem;\r\n    }\r\n    &__login-link{\r\n        text-align: center;\r\n        font-size: .16rem;\r\n        color:$content-notice-fontcolor;\r\n    }\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}